!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).htmlcomponent=e()}(this,(function(){"use strict";var t=window,e=[],n={},o={autoinit:!1,observe:!1,attr:"data-hc",attrData:"data-hcd",attrInit:"data-hci",promiseLoader:window.System&&window.System.import.bind(window.System)||function(t){throw new Error("htmlcomponent: no alternative loader")}};if(t.htmlcomponent)for(var r in o)o[r]=t.htmlcomponent.config[r]||o[r];function i(t,e){var n=[].slice.call(arguments,1);o.promiseLoader(t).then((function(t){"function"==typeof t?t.apply(this,n):"object"==typeof t&&"function"==typeof t.default&&t.default.apply(this,n)}))}function a(t){var e=t.getAttribute(o.attr),n=t.getAttribute(o.attrData),r=t.firstElementChild&&"SCRIPT"==t.firstElementChild.nodeName&&null!=t.firstElementChild.getAttribute(o.attrData)&&t.firstElementChild.innerHTML,a=null;n?a=JSON.parse(n):r&&(a=JSON.parse(r)),function(t,e,n){var r=[e,n,i];o.promiseLoader(t).then((function(t){"function"==typeof t?t.apply(this,r):"object"==typeof t&&"function"==typeof t.default&&t.default.apply(this,r)}))}(e,t,a),t.setAttribute(o.attr+"i",e),t.removeAttribute(o.attr)}function u(t){t.__htmlComp_destroy&&(t.__htmlComp_destroy(),t.__htmlComp_destroy=null)}return i.config=o,i.query=function(t){t||(t=document);for(var e=t.querySelectorAll("["+o.attr+"]"),n=0,r=e.length;n<r;n++){a(e[n])}1==t.nodeType&&t.hasAttribute(o.attr)&&a(t)},i.setStaticLoader=function(t){o.promiseLoader=function(e){return{then:function(n){setTimeout((function(){n(t[e])}),0)}}}},i.set=function(t,e){n[t]=e},i.get=function(t){return n[t]},i.send=function(t,n){var o=e[t];o&&o.forEach((function(e){e(t,n)}))},i.listen=function(t,n){var o=e[t];o||(o=e[t]=[]),o.push(n)},i.unlisten=function(t,n){var o=e[t];o&&o.splice(o.indexOf(n),1)},t.htmlcomponent=i,i.stopObserve=function(){i.observer&&(i.observer.disconnect(),i.observer=null)},i.destroy=function(t){var e=t.querySelectorAll("["+o.attrInit+"]");Array.from(e).forEach((t=>{u(t)})),u(t)},i.onElementDestroy=function(t,e){t.__htmlComp_destroy=e},i.observe=function(){if(window.MutationObserver&&null==i.observer){var t=new MutationObserver((function(t){t.forEach((function(t){if("childList"==t.type&&t.addedNodes.length>0)for(var e=0,n=t.addedNodes.length;e<n;e++){1==(r=t.addedNodes[e]).nodeType&&r.hasAttribute(o.attr)&&i.query(r)}else if(t.removedNodes.length>0)for(e=0,n=t.removedNodes.length;e<n;e++){var r;1==(r=t.removedNodes[e]).nodeType&&r.hasAttribute(o.attrInit)&&i.destroy(r)}}))}));t.observe(document,{subtree:!0,attributeFilter:[o.attr],childList:!0}),i.observer=t}},o.autoinit&&i.query(document),o.observe&&i.observe(),i}));
