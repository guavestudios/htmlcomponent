!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.htmlcomponent=e()}(this,function(){"use strict";function t(t,e){var n=[].slice.call(arguments,1);p.promiseLoader(t).then(function(t){"function"==typeof t?t.apply(this,n):"object"==typeof t&&"function"==typeof t.default&&t.default.apply(this,n)})}function e(t){t||(t=document);for(var e=t.querySelectorAll("["+p.attr+"]"),o=0,i=e.length;o<i;o++){var r=e[o];n(r)}1==t.nodeType&&t.hasAttribute(p.attr)&&n(t)}function n(t){var e=t.getAttribute(p.attr),n=t.getAttribute(p.attrData),i=t.firstElementChild&&"SCRIPT"==t.firstElementChild.nodeName&&null!=t.firstElementChild.getAttribute(p.attrData)&&t.firstElementChild.innerHTML,r=null;n?r=JSON.parse(n):i&&(r=JSON.parse(i)),o(e,t,r),t.setAttribute(p.attr+"i",e),t.removeAttribute(p.attr)}function o(t,e,n){var o=[e,n];p.promiseLoader(t).then(function(t){"function"==typeof t?t.apply(this,o):"object"==typeof t&&"function"==typeof t.default&&t.default.apply(this,o)})}function i(t){p.promiseLoader=function(e){return{then:function(n){setTimeout(function(){n(t[e])},0)}}}}function r(t,e){l[t]=e}function a(t){return l[t]}function u(t,e){var n=s[t];n&&n.forEach(function(n){n(t,e)})}function f(t,e){var n=s[t];n||(n=s[t]=[]),n.push(e)}function d(t,e){var n=s[t];n&&n.splice(n.indexOf(e),1)}var c=window,s=[],l={},p={autoinit:!1,observe:!1,attr:"data-hc",attrData:"data-hcd",attrInit:"data-hci",promiseLoader:window.System&&window.System.import.bind(window.System)||function(t){throw new Error("htmlcomponent: no alternative loader")}};if(c.htmlcomponent)for(var h in p)p[h]=c.htmlcomponent.config[h]||p[h];if(t.config=p,t.query=e,t.setStaticLoader=i,t.set=r,t.get=a,t.send=u,t.listen=f,t.unlisten=d,c.htmlcomponent=t,window.MutationObserver&&p.observe){var m=new MutationObserver(function(e){e.forEach(function(e){if("childList"==e.type&&e.addedNodes.length>0)for(var n=0,o=e.addedNodes.length;n<o;n++){var i=e.addedNodes[n];1==i.nodeType&&i.hasAttribute(p.attr)&&t.query(i)}})});m.observe(document,{subtree:!0,attributeFilter:[p.attr],childList:!0})}return p.autoinit&&t.query(document),t});
