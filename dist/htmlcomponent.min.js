!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.htmlcomponent=e()}(this,function(){"use strict";function t(t,e){m.promiseLoader(t).then(function(t){"function"==typeof t&&t.apply(this,args)})}function e(t){t||(t=document);for(var e=document.querySelectorAll("["+m.attr+"]"),o=0,i=e.length;o<i;o++){var r=e[o];n(r)}1==t.nodeType&&t.hasAttribute(m.attr)&&n(t)}function n(t){var e=t.getAttribute(m.attr),n=t.getAttribute(m.attrData),i=t.firstElementChild&&"SCRIPT"==t.firstElementChild.nodeName&&null!=t.firstElementChild.getAttribute(m.attrData)&&t.firstElementChild.innerHTML,r=null;n?r=JSON.parse(n):i&&(r=JSON.parse(i)),o(e,t,r),t.setAttribute(m.attr+"i",e),t.removeAttribute(m.attr)}function o(t,e,n){m.promiseLoader(t).then(function(t){t&&t(e,n)})}function i(t){m.promiseLoader=function(e){return{then:function(n){setTimeout(function(){n(t[e])},0)}}}}function r(t,e){l[t]=e}function a(t){return l[t]}function u(t,e){var n=s[t];n&&n.forEach(function(n){n(t,e)})}function d(t,e){var n=s[t];n||(n=s[t]=[]),n.push(e)}function c(t,e){var n=s[t];n&&n.splice(n.indexOf(e),1)}var f=window,s=[],l={},m={autoinit:!1,observe:!1,attr:"data-hc",attrData:"data-hcd",attrInit:"data-hci",promiseLoader:window.System&&window.System.import.bind(window.System)||function(t){throw new Error("htmlcomponent: no alternative loader")}};if(f.htmlcomponent)for(var h in m)m[h]=f.htmlcomponent.config[h]||m[h];if(t.config=m,t.query=e,t.setStaticLoader=i,t.set=r,t.get=a,t.send=u,t.listen=d,t.unlisten=c,f.htmlcomponent=t,window.MutationObserver&&m.observe){var p=new MutationObserver(function(e){e.forEach(function(e){if("childList"==e.type&&e.addedNodes.length>0)for(var n=0,o=e.addedNodes.length;n<o;n++){var i=e.addedNodes[n];1==i.nodeType&&i.hasAttribute(m.attr)&&t.query(i)}})});p.observe(document,{subtree:!0,attributeFilter:[m.attr],childList:!0})}return m.autoinit&&t.query(document),t});
